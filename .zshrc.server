# ============================================
# Terminal
# ============================================
# Disable mouse tracking (prevents garbage output from terminals with mouse support)
printf '\e[?1000l\e[?1006l'

# ============================================
# Path & Environment
# ============================================
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8
export PATH="$HOME/.local/bin:$HOME/bin:$PATH"
export EDITOR="nvim"

# cargo
source "$HOME/.cargo/env" 2>/dev/null || true

# nvm
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && . "$NVM_DIR/nvm.sh"

# ============================================
# Completion (daily cache for fast startup)
# ============================================
autoload -Uz compinit
if [[ -n ~/.zcompdump(#qN.mh+24) ]]; then
    compinit
else
    compinit -C
fi

# aliases (must be after compinit)
source ~/dotfiles/.aliases

# ============================================
# Prompt
# ============================================
# Starship disabled on server (causes display issues via SSH)
# eval "$(starship init zsh)"
PROMPT='%n@%m:%~$ '

# ============================================
# Claude Code helpers
# ============================================
pr-review() {
    if [ -z "$1" ]; then
        echo "Usage: pr-review <PR-number>"
        echo "Example: pr-review 47"
        return 1
    fi
    claude --dangerously-skip-permissions "PR$1を pr-review-agentでレビューとちゃんと実APIを利用したevaluationのテストまで完了すること。"
}
